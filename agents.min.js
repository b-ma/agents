!function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[a]={exports:{}};t[a][0].call(l.exports,function(e){var i=t[a][1][e];return r(i?i:e)},l,l.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){var n={BaseGameEntity:e("./dist/base-game-entity"),MovingEntity:e("./dist/moving-entity"),Vehicle:e("./dist/vehicle"),SteeringBehaviors:e("./dist/steering-behaviors")};t.exports=n},{"./dist/base-game-entity":2,"./dist/moving-entity":3,"./dist/steering-behaviors":4,"./dist/vehicle":6}],2:[function(e,t,i){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],r=e("babel-runtime/helpers/class-call-check")["default"],s=e("vector"),a=-1,o=0,c=function(){function e(){var t=void 0===arguments[0]?a:arguments[0],i=void 0===arguments[1]?s(0,0):arguments[1],n=void 0===arguments[2]?0:arguments[2];r(this,e),this.id=o++,this.entityType=t,this.position=i,this.boundingRadius=n,this._tag=!1}return n(e,[{key:"update",value:function(e){}},{key:"render",value:function(e,t){}},{key:"handleMessage",value:function(e){return!1}},{key:"isTagged",value:function(){return this._tag}},{key:"tag",value:function(){this._tag=!0}},{key:"unTag",value:function(){this._tag=!1}}]),e}();t.exports=c},{"babel-runtime/helpers/class-call-check":11,"babel-runtime/helpers/create-class":12,vector:7}],3:[function(e,t,i){"use strict";var n=e("babel-runtime/helpers/inherits")["default"],r=e("babel-runtime/helpers/get")["default"],s=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],o=(e("vector"),e("./base-game-entity")),c=0,u=function(e){function t(e,i,n,s,o,u,l,h){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c,e,i),this.velocity=n,this.heading=o,this.side=null,this.mass=u,this.maxSpeed=s,this.maxForce=h,this.maxTurnRate=l}return n(t,e),s(t,[{key:"speed",value:function(){return this.velocity.magnitude()}},{key:"speedSqrt",value:function(){return this.velocity.magnitudeSqrt()}}]),t}(o);t.exports=u},{"./base-game-entity":2,"babel-runtime/helpers/class-call-check":11,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":13,"babel-runtime/helpers/inherits":14,vector:7}],4:[function(e,t,i){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],r=e("babel-runtime/helpers/class-call-check")["default"],s=e("vector"),a=e("./utils"),o=function(){function e(t){r(this,e),this.vehicle=t,this.params={minDetectionBoxLength:40,wallDetectionFeelerLength:40},this.feelers=[],this.wanderRadius=6,this.wanderDistance=15,this.wanderJitter=2;var i=a.rand()*a.TwoPI;this.wanderTarget=new s(this.wanderRadius*Math.cos(i),this.wanderRadius*Math.sin(i))}return n(e,[{key:"calculate",value:function(){if(!this.vehicle.world.isStarted)return new s;var e=this.vehicle.world.steeringTweakers,t=new s;if(this._seek&&this.vehicle.world.target){var i=this.seek(this.vehicle.world.target);i.multiply(e.seek),t.add(i)}if(this._flee&&this.vehicle.world.target){var i=this.flee(this.vehicle.world.target);i.multiply(e.flee),t.add(i)}if(this._arrive&&this.vehicle.world.target){var i=this.arrive(this.vehicle.world.target,3);i.multiply(e.arrive),t.add(i)}if(this._pursuit){var i=this.pursuit(this.vehicle.world.evader);i.multiply(e.pursuit),t.add(i)}if(this._evade){var i=this.evade(this.vehicle.world.pursuer);i.multiply(e.evade),t.add(i)}if(this._wander){var i=this.wander();i.multiply(e.wander),t.add(i)}if(this._obstacleAvoidance){var i=this.obstacleAvoidance(this.vehicle.world.obstacles);i.multiply(e.obstacleAvoidance),t.add(i)}if(this._wallAvoidance){var i=this.wallAvoidance(this.vehicle.world.walls);i.multiply(e.wallAvoidance),t.add(i)}if(this._flock){this.vehicle.world.tagBoidsWithinRange(this.vehicle);var n=new s;n.add(this.separation(this.vehicle.neighbors).multiply(e.separation)),n.add(this.alignment(this.vehicle.neighbors).multiply(e.alignment)),n.add(this.cohesion(this.vehicle.neighbors).multiply(e.cohesion)),t.add(n)}return t}},{key:"seekOn",value:function(){this._seek=!0}},{key:"seekOff",value:function(){this._seek=!1}},{key:"fleeOn",value:function(){this._flee=!0}},{key:"fleeOff",value:function(){this._flee=!1}},{key:"arriveOn",value:function(){this._arrive=!0}},{key:"arriveOff",value:function(){this._arrive=!1}},{key:"pursuitOn",value:function(){this._pursuit=!0}},{key:"pursuitOff",value:function(){this._pursuit=!1}},{key:"evadeOn",value:function(){this._evade=!0}},{key:"evadeOff",value:function(){this._evade=!1}},{key:"wanderOn",value:function(){this._wander=!0}},{key:"wanderOff",value:function(){this._wander=!1}},{key:"obstacleAvoidanceOn",value:function(){this._obstacleAvoidance=!0}},{key:"obstacleAvoidanceOff",value:function(){this._obstacleAvoidance=!1}},{key:"wallAvoidanceOn",value:function(){this._wallAvoidance=!0}},{key:"wallAvoidanceOff",value:function(){this._wallAvoidance=!1}},{key:"flockOn",value:function(){this._flock=!0}},{key:"flockOff",value:function(){this._flock=!1}},{key:"seek",value:function(e){var t=s.substract(e,this.vehicle.position).normalize().multiply(this.vehicle.maxSpeed),i=s.substract(t,this.vehicle.velocity);return i}},{key:"flee",value:function(e){var t=1e4;if(s.distanceSqrt(this.vehicle.position,e)>t)return new s;var i=s.substract(this.vehicle.position,e).normalize().multiply(this.vehicle.maxSpeed),n=s.substract(i,this.vehicle.velocity);return n}},{key:"arrive",value:function(e,t){var i=s.substract(e,this.vehicle.position),n=i.magnitude();if(n>0){var r=.3,a=n/(t*r);a=Math.min(a,this.vehicle.maxSpeed);var o=i.divide(n).multiply(a),c=s.substract(o,this.vehicle.velocity);return c}return new s}},{key:"pursuit",value:function(e){var t=s.substract(e.position,this.vehicle.position),i=s.dot(e.heading,this.vehicle.heading);if(s.dot(this.vehicle.heading,t)>0&&-.95>i)return this.seek(e.position);var n=t.magnitude()/(this.vehicle.maxSpeed+e.speed()),r=s.add(e.position,s.multiply(e.velocity,n));return this.seek(r)}},{key:"evade",value:function(e){var t=s.substract(e.position,this.vehicle.position),i=t.magnitude()/(this.vehicle.maxSpeed+e.speed()),n=s.add(e.position,s.multiply(e.velocity,i));return this.flee(n)}},{key:"wander",value:function(){var e=new s(a.randClamped()*this.wanderJitter,a.randClamped()*this.wanderJitter);this.wanderTarget.add(e),this.wanderTarget.normalize().multiply(this.wanderRadius);var t=s.add(this.wanderTarget,new s(this.wanderDistance,0)),i=t;return i.rotate(this.vehicle.heading.direction()),i.add(this.vehicle.position),s.substract(i,this.vehicle.position)}},{key:"obstacleAvoidance",value:function(e){var t=this.params.minDetectionBoxLength+this.vehicle.speed()/this.vehicle.maxSpeed*this.params.minDetectionBoxLength;this.vehicle.world.tagObstaclesWithinRange(this.vehicle,t);var i=null,n=+(1/0),r=null;e.forEach(function(e){if(e.isTagged()){var t=e.position.clone();if(t.rotate(-1*this.vehicle.heading.direction()),t.substract(this.vehicle.position),!(t.x<0)){var s=e.boundingRadius+this.vehicle.boundingRadius;if(!(t.y>s)){var a=t.x,o=t.y,c=Math.sqrt(s*s-o*o),u=a-c;0>u&&(u=a+c),n>u&&(n=u,i=e,r=t)}}}},this);var a=new s;if(i){var o=1+(t-r.x)/t;a.y=(i.boundingRadius-r.y)*o;var c=.2;a.x=(i.boundingRadius-r.x)*c}return a.rotate(this.vehicle.heading.direction()),a}},{key:"wallAvoidance",value:function(e){this.createFeelers();var t,i,n=+(1/0),r=null,a=null,o=new s,c=function(e,n,r,a){var o=(e.y-r.y)*(a.x-r.x)-(e.x-r.x)*(a.y-r.y),c=(n.x-e.x)*(a.y-r.y)-(n.y-e.y)*(a.x-r.x),u=(e.y-r.y)*(n.x-e.x)-(e.x-r.x)*(n.y-e.y),l=(n.x-e.x)*(a.y-r.y)-(n.y-e.y)*(a.x-r.x);if(0===c||0===l)return!1;var h=o/c,d=u/l;return h>0&&1>h&&d>0&&1>d?(t=s.distance(e,n)*h,i=new s(e.x+h,e.y+h),i.multiply(1.08),!0):(t=0,!1)};return this.feelers.forEach(function(u){if(e.forEach(function(e){c(this.vehicle.position,u,e.from,e.to)&&n>t&&(n=t,a=e,r=i)},this),a){var l=s.substract(u,r);o=s.multiply(a.normal,l.magnitude())}},this),o}},{key:"createFeelers",value:function(){var e=s.multiply(this.vehicle.heading,this.params.wallDetectionFeelerLength);this.feelers[0]=s.add(this.vehicle.position,e);var e=this.vehicle.heading.clone();e.rotate(Math.PI/2*3.5),e=s.multiply(e,this.params.wallDetectionFeelerLength/2),this.feelers[1]=s.add(this.vehicle.position,e);var e=this.vehicle.heading.clone();e.rotate(Math.PI/2*.5),e=s.multiply(e,this.params.wallDetectionFeelerLength/2),this.feelers[2]=s.add(this.vehicle.position,e)}},{key:"separation",value:function(e){var t=new s;return e.forEach(function(e,i){var n=s.substract(this.vehicle.position,e.position),r=n.magnitude();n.normalize().divide(r),t.add(n)},this),t}},{key:"alignment",value:function(e){var t=new s,i=e.length;return e.forEach(function(e){t.add(e.heading)}),i>0&&(t.divide(i),t.substract(this.vehicle.heading)),t}},{key:"cohesion",value:function(e){var t=new s,i=new s,n=e.length;return e.forEach(function(e){t.add(e.position)}),n&&(t.divide(n),i=this.seek(t)),i}},{key:"debugFeelers",value:function(e){this.feelers.forEach(function(t){e.save(),e.beginPath(),e.strokeStyle="#acacac",e.moveTo(this.vehicle.position.x,this.vehicle.position.y),e.lineTo(t.x,t.y),e.stroke(),e.closePath(),e.restore()},this)}},{key:"debugWander",value:function(e){e.save(),e.translate(this.vehicle.position.x,this.vehicle.position.y),e.rotate(this.vehicle.heading.direction()),e.translate(this.wanderDistance,0),e.strokeStyle="red",e.fillStyle="red",e.beginPath(),e.arc(0,0,this.wanderRadius,0,a.TwoPI,!1),e.stroke(),e.closePath(),e.beginPath(),e.arc(this.wanderTarget.x,this.wanderTarget.y,2,0,a.TwoPI,!1),e.stroke(),e.closePath(),e.restore()}}]),e}();t.exports=o},{"./utils":5,"babel-runtime/helpers/class-call-check":11,"babel-runtime/helpers/create-class":12,vector:7}],5:[function(e,t,i){"use strict";var n={TwoPI:2*Math.PI,rand:function(){return Math.random()},degsToRads:function(e){return this.TwoPI*(e/360)},randClamped:function(){return 2*Math.random()-1},randBool:function(){return Math.random()>.5}};t.exports=n},{}],6:[function(e,t,i){"use strict";var n=e("babel-runtime/helpers/inherits")["default"],r=e("babel-runtime/helpers/get")["default"],s=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],o=e("vector"),c=e("./moving-entity"),u=e("./steering-behaviors"),l=function(e){function t(e,i,n,s,o,c,l,h,d){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,i,n,s,o,c,l,h,d),this.world=e,this.steerings=new u(this)}return n(t,e),s(t,[{key:"update",value:function(e){var t=this.steerings.calculate();this.acceleration=o.divide(t,this.mass),this.velocity.add(o.multiply(this.acceleration,e)),this.velocity.truncate(this.maxSpeed),this.position.add(o.multiply(this.velocity,e)),this.velocity.magnitudeSqrt()>1e-5&&(this.heading=o.normalize(this.velocity),this.side=o.orthogonal(this.heading))}},{key:"render",value:function(e,t){}}]),t}(c);t.exports=l},{"./moving-entity":3,"./steering-behaviors":4,"babel-runtime/helpers/class-call-check":11,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":13,"babel-runtime/helpers/inherits":14,vector:7}],7:[function(e,t,i){var n=function(e,t){this.x=isNaN(e)?0:e,this.y=isNaN(t)?0:t};n.add=function(e,t){return new this(e.x+t.x,e.y+t.y)},n.substract=function(e,t){return new this(e.x-t.x,e.y-t.y)},n.multiply=function(e,t){return new this(e.x*t,e.y*t)},n.divide=function(e,t){return new this(e.x/t,e.y/t)},n.distance=function(e,t){var i=this.substract(t,e);return i.magnitude()},n.distanceSqrt=function(e,t){var i=this.substract(t,e);return i.magnitudeSqrt()},n.clone=function(e){return new this(e.x,e.y)},n.orthogonal=function(e){return new this(-e.y,e.x)},n.normal=function(e,t){var i=n.substract(t,e).normalize();return new this(-i.y,i.x)},n.normalize=function(e){return e.clone().normalize()},n.dot=function(e,t){return e.normalize(),t.normalize(),e.x*t.x+e.y*t.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.substract=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.multiply=function(e){return e instanceof n?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this},n.prototype.divide=function(e){return this.multiply(1/e)},n.prototype.truncate=function(e){return this.magnitude()>e&&this.normalize(e),this},n.prototype.normalize=function(e){var e=e?e:1,t=this.magnitude();return 0===t?this:(this.x=this.x/t,this.y=this.y/t,this.multiply(e),this)},n.prototype.rotate=function(e){var t=this.direction()+e;this.setAngle(t)},n.prototype.setAngle=function(e){var t=this.magnitude();return this.normalize(),this.x=Math.cos(e),this.y=Math.sin(e),this.multiply(t),this},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.magnitudeSqrt=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},n.prototype.direction=function(){return Math.atan2(this.y,this.x)},n.prototype.clone=function(){return new this.constructor(this.x,this.y)},t.exports=n},{}],8:[function(e,t,i){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":15}],9:[function(e,t,i){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":16}],10:[function(e,t,i){t.exports={"default":e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":17}],11:[function(e,t,i){"use strict";i["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i.__esModule=!0},{}],12:[function(e,t,i){"use strict";var n=e("babel-runtime/core-js/object/define-property")["default"];i["default"]=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),n(e,r.key,r)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),i.__esModule=!0},{"babel-runtime/core-js/object/define-property":9}],13:[function(e,t,i){"use strict";var n=e("babel-runtime/core-js/object/get-own-property-descriptor")["default"];i["default"]=function(e,t,i){for(var r=!0;r;){var s=e,a=t,o=i;c=l=u=void 0,r=!1;var c=n(s,a);if(void 0!==c){if("value"in c)return c.value;var u=c.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(s);if(null===l)return void 0;e=l,t=a,i=o,r=!0}},i.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":10}],14:[function(e,t,i){"use strict";var n=e("babel-runtime/core-js/object/create")["default"];i["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=n(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},i.__esModule=!0},{"babel-runtime/core-js/object/create":8}],15:[function(e,t,i){var n=e("../../modules/$");t.exports=function(e,t){return n.create(e,t)}},{"../../modules/$":21}],16:[function(e,t,i){var n=e("../../modules/$");t.exports=function(e,t,i){return n.setDesc(e,t,i)}},{"../../modules/$":21}],17:[function(e,t,i){var n=e("../../modules/$");e("../../modules/es6.object.statics-accept-primitives"),t.exports=function(e,t){return n.getDesc(e,t)}},{"../../modules/$":21,"../../modules/es6.object.statics-accept-primitives":22}],18:[function(e,t,i){function n(e,t){return function(){return e.apply(t,arguments)}}function r(e,t,i){var s,u,l,h,d=e&r.G,f=e&r.P,v=d?a:e&r.S?a[t]:(a[t]||{}).prototype,p=d?o:o[t]||(o[t]={});d&&(i=t);for(s in i)u=!(e&r.F)&&v&&s in v,u&&s in p||(l=u?v[s]:i[s],d&&!c(v[s])?h=i[s]:e&r.B&&u?h=n(l,a):e&r.W&&v[s]==l?!function(e){h=function(t){return this instanceof e?new e(t):e(t)},h.prototype=e.prototype}(l):h=f&&c(l)?n(Function.call,l):l,p[s]=h,f&&((p.prototype||(p.prototype={}))[s]=l))}var s=e("./$"),a=s.g,o=s.core,c=s.isFunction;r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,t.exports=r},{"./$":21}],19:[function(e,t,i){t.exports=function(e){return e.FW=!1,e.path=e.core,e}},{}],20:[function(e,t,i){function n(e){try{return a(e)}catch(t){return o.slice()}}var r=e("./$"),s={}.toString,a=r.getNames,o="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.get=function(e){return o&&"[object Window]"==s.call(e)?n(e):a(r.toObject(e))}},{"./$":21}],21:[function(e,t,i){"use strict";function n(e){return isNaN(e=+e)?0:(e>0?p:v)(e)}function r(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function s(e,t,i){return e[t]=i,e}function a(e){return b?function(t,i,n){return w.setDesc(t,i,r(e,n))}:s}function o(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function c(e){return"function"==typeof e}function u(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var l="undefined"!=typeof self?self:Function("return this")(),h={},d=Object.defineProperty,f={}.hasOwnProperty,v=Math.ceil,p=Math.floor,y=Math.max,m=Math.min,b=!!function(){try{return 2==d({},"a",{get:function(){return 2}}).a}catch(e){}}(),g=a(1),w=t.exports=e("./$.fw")({g:l,core:h,html:l.document&&document.documentElement,isObject:o,isFunction:c,that:function(){return this},toInteger:n,toLength:function(e){return e>0?m(n(e),9007199254740991):0},toIndex:function(e,t){return e=n(e),0>e?y(e+t,0):m(e,t)},has:function(e,t){return f.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:b,desc:r,getDesc:Object.getOwnPropertyDescriptor,setDesc:d,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:u,ES5Object:Object,toObject:function(e){return w.ES5Object(u(e))},hide:g,def:a(0),set:l.Symbol?s:g,each:[].forEach});"undefined"!=typeof __e&&(__e=h),"undefined"!=typeof __g&&(__g=l)},{"./$.fw":19}],22:[function(e,t,i){var n=e("./$"),r=e("./$.def"),s=n.isObject,a=n.toObject;n.each.call("freeze,seal,preventExtensions,isFrozen,isSealed,isExtensible,getOwnPropertyDescriptor,getPrototypeOf,keys,getOwnPropertyNames".split(","),function(t,i){var o=(n.core.Object||{})[t]||Object[t],c=0,u={};u[t]=0==i?function(e){return s(e)?o(e):e}:1==i?function(e){return s(e)?o(e):e}:2==i?function(e){return s(e)?o(e):e}:3==i?function(e){return s(e)?o(e):!0}:4==i?function(e){return s(e)?o(e):!0}:5==i?function(e){return s(e)?o(e):!1}:6==i?function(e,t){return o(a(e),t)}:7==i?function(e){return o(Object(n.assertDefined(e)))}:8==i?function(e){return o(a(e))}:e("./$.get-names").get;try{o("z")}catch(l){c=1}r(r.S+r.F*c,"Object",u)})},{"./$":21,"./$.def":18,"./$.get-names":20}]},{},[1]);